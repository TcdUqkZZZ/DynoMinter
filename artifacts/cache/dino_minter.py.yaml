filename: dino_minter.py
timestamp: 1657886571
compiled: BiAEAQACBCYIB21hbmFnZXIJdW5jbGFpbWVkC3doaXRlbGlzdGVkDGN1cnJlbnRfdGllcgVwcmljZQ93aGl0ZWxpc3RfY291bnQMbWludGVkX3VuaXRzB2lzX29wZW4xGCMSQAINMRkiEkAB3jEZJRJAAcoxGYEFEkABtTYaAIANc2V0X3doaXRlbGlzdBJAAVg2GgCAC3NldF9tYW5hZ2VyEkABGzYaAIADYnV5EkAAlTYaAIAFY2xhaW0SQABwNhoAgA1pbmNyZWFzZV90aWVyEkAAJTYaAIAGcmVkZWVtEkAAAQAxAChkEjIEIhIQRDEANhoBiAIZIkMyBCISMSAyAxIxCTIDEhAxFTIDEhAQMQAoZBIQMRskEhBEKytkIghnJwQ2GgEXZycHI2ciQzYwADEAKWISRDEAKWKIAbsxACkjZiJDMgQkEkQzAQCIAUk1ADMBECISMwEAMwAAEhAzAQg0AA8QMwEHMgoSEDMBACliIxIQRCcHZCMSQAA1NwAaATcAGgKIATUzAAApNAFmiAEiMwEINAAyAAgNQAACIkMzAQAzAQg0AAkyAAmIAWBC/+wzAQAqYitkEkRC/78yBCISMR0iEhAxIDIDEjEJMgMSEDEVMgMSEBAxAChkEhBEKDYcAWciQzIEIhIxHSISEDEbJBIQMSAyAxIxCTIDEhAxFTIDEhAQMQAoZBIQRDYcASpiIxJAAAs2HAEqNhoBF2YiQycFJwVkIghnQv/qMQAoZBIyBCISEEQiQzEAKGQSMgQiEhBEIkMyBCISMRsjEhAxIDIDEjEJMgMSEDEVMgMSEBBEMQAqI2YxACkjZiJDMgQiEjEgMgMSMQkyAxIQMRUyAxIQEEQnBSNnKDEAZycGI2crI2ciQzUCNAIqYiMNQAAGJwRkQgAKJwRkJwRkgQoKCYknBicGZCIIZ4k1BDUDsYEDshAisiIjsiOAA0RZTrIlgAREeW5vsiYjsiQyCrIsKGSyKTQDsic0BLIFMgCyAbO0PDUBiTUFsSWyEDQFshEishIyCrITMQCyFLOJNQc1BrEishA0B7IIMgqyADQGsgcyALIBs4k=
compiledHash: UTJOWV26H6SPHXELO4Y3IOH45QTQC2NPFFTRB6B7YIHITDGNSBPFCM5PDA
srcHash: 973027299
base64ToBytes:
  - 6
  - 32
  - 4
  - 1
  - 0
  - 2
  - 4
  - 38
  - 8
  - 7
  - 109
  - 97
  - 110
  - 97
  - 103
  - 101
  - 114
  - 9
  - 117
  - 110
  - 99
  - 108
  - 97
  - 105
  - 109
  - 101
  - 100
  - 11
  - 119
  - 104
  - 105
  - 116
  - 101
  - 108
  - 105
  - 115
  - 116
  - 101
  - 100
  - 12
  - 99
  - 117
  - 114
  - 114
  - 101
  - 110
  - 116
  - 95
  - 116
  - 105
  - 101
  - 114
  - 5
  - 112
  - 114
  - 105
  - 99
  - 101
  - 15
  - 119
  - 104
  - 105
  - 116
  - 101
  - 108
  - 105
  - 115
  - 116
  - 95
  - 99
  - 111
  - 117
  - 110
  - 116
  - 12
  - 109
  - 105
  - 110
  - 116
  - 101
  - 100
  - 95
  - 117
  - 110
  - 105
  - 116
  - 115
  - 7
  - 105
  - 115
  - 95
  - 111
  - 112
  - 101
  - 110
  - 49
  - 24
  - 35
  - 18
  - 64
  - 2
  - 13
  - 49
  - 25
  - 34
  - 18
  - 64
  - 1
  - 222
  - 49
  - 25
  - 37
  - 18
  - 64
  - 1
  - 202
  - 49
  - 25
  - 129
  - 5
  - 18
  - 64
  - 1
  - 181
  - 54
  - 26
  - 0
  - 128
  - 13
  - 115
  - 101
  - 116
  - 95
  - 119
  - 104
  - 105
  - 116
  - 101
  - 108
  - 105
  - 115
  - 116
  - 18
  - 64
  - 1
  - 88
  - 54
  - 26
  - 0
  - 128
  - 11
  - 115
  - 101
  - 116
  - 95
  - 109
  - 97
  - 110
  - 97
  - 103
  - 101
  - 114
  - 18
  - 64
  - 1
  - 27
  - 54
  - 26
  - 0
  - 128
  - 3
  - 98
  - 117
  - 121
  - 18
  - 64
  - 0
  - 149
  - 54
  - 26
  - 0
  - 128
  - 5
  - 99
  - 108
  - 97
  - 105
  - 109
  - 18
  - 64
  - 0
  - 112
  - 54
  - 26
  - 0
  - 128
  - 13
  - 105
  - 110
  - 99
  - 114
  - 101
  - 97
  - 115
  - 101
  - 95
  - 116
  - 105
  - 101
  - 114
  - 18
  - 64
  - 0
  - 37
  - 54
  - 26
  - 0
  - 128
  - 6
  - 114
  - 101
  - 100
  - 101
  - 101
  - 109
  - 18
  - 64
  - 0
  - 1
  - 0
  - 49
  - 0
  - 40
  - 100
  - 18
  - 50
  - 4
  - 34
  - 18
  - 16
  - 68
  - 49
  - 0
  - 54
  - 26
  - 1
  - 136
  - 2
  - 25
  - 34
  - 67
  - 50
  - 4
  - 34
  - 18
  - 49
  - 32
  - 50
  - 3
  - 18
  - 49
  - 9
  - 50
  - 3
  - 18
  - 16
  - 49
  - 21
  - 50
  - 3
  - 18
  - 16
  - 16
  - 49
  - 0
  - 40
  - 100
  - 18
  - 16
  - 49
  - 27
  - 36
  - 18
  - 16
  - 68
  - 43
  - 43
  - 100
  - 34
  - 8
  - 103
  - 39
  - 4
  - 54
  - 26
  - 1
  - 23
  - 103
  - 39
  - 7
  - 35
  - 103
  - 34
  - 67
  - 54
  - 48
  - 0
  - 49
  - 0
  - 41
  - 98
  - 18
  - 68
  - 49
  - 0
  - 41
  - 98
  - 136
  - 1
  - 187
  - 49
  - 0
  - 41
  - 35
  - 102
  - 34
  - 67
  - 50
  - 4
  - 36
  - 18
  - 68
  - 51
  - 1
  - 0
  - 136
  - 1
  - 73
  - 53
  - 0
  - 51
  - 1
  - 16
  - 34
  - 18
  - 51
  - 1
  - 0
  - 51
  - 0
  - 0
  - 18
  - 16
  - 51
  - 1
  - 8
  - 52
  - 0
  - 15
  - 16
  - 51
  - 1
  - 7
  - 50
  - 10
  - 18
  - 16
  - 51
  - 1
  - 0
  - 41
  - 98
  - 35
  - 18
  - 16
  - 68
  - 39
  - 7
  - 100
  - 35
  - 18
  - 64
  - 0
  - 53
  - 55
  - 0
  - 26
  - 1
  - 55
  - 0
  - 26
  - 2
  - 136
  - 1
  - 53
  - 51
  - 0
  - 0
  - 41
  - 52
  - 1
  - 102
  - 136
  - 1
  - 34
  - 51
  - 1
  - 8
  - 52
  - 0
  - 50
  - 0
  - 8
  - 13
  - 64
  - 0
  - 2
  - 34
  - 67
  - 51
  - 1
  - 0
  - 51
  - 1
  - 8
  - 52
  - 0
  - 9
  - 50
  - 0
  - 9
  - 136
  - 1
  - 96
  - 66
  - 255
  - 236
  - 51
  - 1
  - 0
  - 42
  - 98
  - 43
  - 100
  - 18
  - 68
  - 66
  - 255
  - 191
  - 50
  - 4
  - 34
  - 18
  - 49
  - 29
  - 34
  - 18
  - 16
  - 49
  - 32
  - 50
  - 3
  - 18
  - 49
  - 9
  - 50
  - 3
  - 18
  - 16
  - 49
  - 21
  - 50
  - 3
  - 18
  - 16
  - 16
  - 49
  - 0
  - 40
  - 100
  - 18
  - 16
  - 68
  - 40
  - 54
  - 28
  - 1
  - 103
  - 34
  - 67
  - 50
  - 4
  - 34
  - 18
  - 49
  - 29
  - 34
  - 18
  - 16
  - 49
  - 27
  - 36
  - 18
  - 16
  - 49
  - 32
  - 50
  - 3
  - 18
  - 49
  - 9
  - 50
  - 3
  - 18
  - 16
  - 49
  - 21
  - 50
  - 3
  - 18
  - 16
  - 16
  - 49
  - 0
  - 40
  - 100
  - 18
  - 16
  - 68
  - 54
  - 28
  - 1
  - 42
  - 98
  - 35
  - 18
  - 64
  - 0
  - 11
  - 54
  - 28
  - 1
  - 42
  - 54
  - 26
  - 1
  - 23
  - 102
  - 34
  - 67
  - 39
  - 5
  - 39
  - 5
  - 100
  - 34
  - 8
  - 103
  - 66
  - 255
  - 234
  - 49
  - 0
  - 40
  - 100
  - 18
  - 50
  - 4
  - 34
  - 18
  - 16
  - 68
  - 34
  - 67
  - 49
  - 0
  - 40
  - 100
  - 18
  - 50
  - 4
  - 34
  - 18
  - 16
  - 68
  - 34
  - 67
  - 50
  - 4
  - 34
  - 18
  - 49
  - 27
  - 35
  - 18
  - 16
  - 49
  - 32
  - 50
  - 3
  - 18
  - 49
  - 9
  - 50
  - 3
  - 18
  - 16
  - 49
  - 21
  - 50
  - 3
  - 18
  - 16
  - 16
  - 68
  - 49
  - 0
  - 42
  - 35
  - 102
  - 49
  - 0
  - 41
  - 35
  - 102
  - 34
  - 67
  - 50
  - 4
  - 34
  - 18
  - 49
  - 32
  - 50
  - 3
  - 18
  - 49
  - 9
  - 50
  - 3
  - 18
  - 16
  - 49
  - 21
  - 50
  - 3
  - 18
  - 16
  - 16
  - 68
  - 39
  - 5
  - 35
  - 103
  - 40
  - 49
  - 0
  - 103
  - 39
  - 6
  - 35
  - 103
  - 43
  - 35
  - 103
  - 34
  - 67
  - 53
  - 2
  - 52
  - 2
  - 42
  - 98
  - 35
  - 13
  - 64
  - 0
  - 6
  - 39
  - 4
  - 100
  - 66
  - 0
  - 10
  - 39
  - 4
  - 100
  - 39
  - 4
  - 100
  - 129
  - 10
  - 10
  - 9
  - 137
  - 39
  - 6
  - 39
  - 6
  - 100
  - 34
  - 8
  - 103
  - 137
  - 53
  - 4
  - 53
  - 3
  - 177
  - 129
  - 3
  - 178
  - 16
  - 34
  - 178
  - 34
  - 35
  - 178
  - 35
  - 128
  - 3
  - 68
  - 89
  - 78
  - 178
  - 37
  - 128
  - 4
  - 68
  - 121
  - 110
  - 111
  - 178
  - 38
  - 35
  - 178
  - 36
  - 50
  - 10
  - 178
  - 44
  - 40
  - 100
  - 178
  - 41
  - 52
  - 3
  - 178
  - 39
  - 52
  - 4
  - 178
  - 5
  - 50
  - 0
  - 178
  - 1
  - 179
  - 180
  - 60
  - 53
  - 1
  - 137
  - 53
  - 5
  - 177
  - 37
  - 178
  - 16
  - 52
  - 5
  - 178
  - 17
  - 34
  - 178
  - 18
  - 50
  - 10
  - 178
  - 19
  - 49
  - 0
  - 178
  - 20
  - 179
  - 137
  - 53
  - 7
  - 53
  - 6
  - 177
  - 34
  - 178
  - 16
  - 52
  - 7
  - 178
  - 8
  - 50
  - 10
  - 178
  - 0
  - 52
  - 6
  - 178
  - 7
  - 50
  - 0
  - 178
  - 1
  - 179
  - 137
tealCode: |
  #pragma version 6
  txn ApplicationID
  int 0
  ==
  bnz main_l26
  txn OnCompletion
  int OptIn
  ==
  bnz main_l25
  txn OnCompletion
  int UpdateApplication
  ==
  bnz main_l24
  txn OnCompletion
  int DeleteApplication
  ==
  bnz main_l23
  txna ApplicationArgs 0
  byte "set_whitelist"
  ==
  bnz main_l20
  txna ApplicationArgs 0
  byte "set_manager"
  ==
  bnz main_l19
  txna ApplicationArgs 0
  byte "buy"
  ==
  bnz main_l14
  txna ApplicationArgs 0
  byte "claim"
  ==
  bnz main_l13
  txna ApplicationArgs 0
  byte "increase_tier"
  ==
  bnz main_l12
  txna ApplicationArgs 0
  byte "redeem"
  ==
  bnz main_l11
  err
  main_l11:
  txn Sender
  byte "manager"
  app_global_get
  ==
  global GroupSize
  int 1
  ==
  &&
  assert
  txn Sender
  txna ApplicationArgs 1
  callsub sendpayment_4
  int 1
  return
  main_l12:
  global GroupSize
  int 1
  ==
  txn RekeyTo
  global ZeroAddress
  ==
  txn CloseRemainderTo
  global ZeroAddress
  ==
  &&
  txn AssetCloseTo
  global ZeroAddress
  ==
  &&
  &&
  txn Sender
  byte "manager"
  app_global_get
  ==
  &&
  txn NumAppArgs
  int 2
  ==
  &&
  assert
  byte "current_tier"
  byte "current_tier"
  app_global_get
  int 1
  +
  app_global_put
  byte "price"
  txna ApplicationArgs 1
  btoi
  app_global_put
  byte "is_open"
  int 0
  app_global_put
  int 1
  return
  main_l13:
  txna Assets 0
  txn Sender
  byte "unclaimed"
  app_local_get
  ==
  assert
  txn Sender
  byte "unclaimed"
  app_local_get
  callsub transferasset_3
  txn Sender
  byte "unclaimed"
  int 0
  app_local_put
  int 1
  return
  main_l14:
  global GroupSize
  int 2
  ==
  assert
  gtxn 1 Sender
  callsub computetotalprice_0
  store 0
  gtxn 1 TypeEnum
  int pay
  ==
  gtxn 1 Sender
  gtxn 0 Sender
  ==
  &&
  gtxn 1 Amount
  load 0
  >=
  &&
  gtxn 1 Receiver
  global CurrentApplicationAddress
  ==
  &&
  gtxn 1 Sender
  byte "unclaimed"
  app_local_get
  int 0
  ==
  &&
  assert
  byte "is_open"
  app_global_get
  int 0
  ==
  bnz main_l18
  main_l15:
  gtxna 0 ApplicationArgs 1
  gtxna 0 ApplicationArgs 2
  callsub executeminttx_2
  gtxn 0 Sender
  byte "unclaimed"
  load 1
  app_local_put
  callsub increasemintedunits_1
  gtxn 1 Amount
  load 0
  global MinTxnFee
  +
  >
  bnz main_l17
  main_l16:
  int 1
  return
  main_l17:
  gtxn 1 Sender
  gtxn 1 Amount
  load 0
  -
  global MinTxnFee
  -
  callsub sendpayment_4
  b main_l16
  main_l18:
  gtxn 1 Sender
  byte "whitelisted"
  app_local_get
  byte "current_tier"
  app_global_get
  ==
  assert
  b main_l15
  main_l19:
  global GroupSize
  int 1
  ==
  txn NumAccounts
  int 1
  ==
  &&
  txn RekeyTo
  global ZeroAddress
  ==
  txn CloseRemainderTo
  global ZeroAddress
  ==
  &&
  txn AssetCloseTo
  global ZeroAddress
  ==
  &&
  &&
  txn Sender
  byte "manager"
  app_global_get
  ==
  &&
  assert
  byte "manager"
  txna Accounts 1
  app_global_put
  int 1
  return
  main_l20:
  global GroupSize
  int 1
  ==
  txn NumAccounts
  int 1
  ==
  &&
  txn NumAppArgs
  int 2
  ==
  &&
  txn RekeyTo
  global ZeroAddress
  ==
  txn CloseRemainderTo
  global ZeroAddress
  ==
  &&
  txn AssetCloseTo
  global ZeroAddress
  ==
  &&
  &&
  txn Sender
  byte "manager"
  app_global_get
  ==
  &&
  assert
  txna Accounts 1
  byte "whitelisted"
  app_local_get
  int 0
  ==
  bnz main_l22
  main_l21:
  txna Accounts 1
  byte "whitelisted"
  txna ApplicationArgs 1
  btoi
  app_local_put
  int 1
  return
  main_l22:
  byte "whitelist_count"
  byte "whitelist_count"
  app_global_get
  int 1
  +
  app_global_put
  b main_l21
  main_l23:
  txn Sender
  byte "manager"
  app_global_get
  ==
  global GroupSize
  int 1
  ==
  &&
  assert
  int 1
  return
  main_l24:
  txn Sender
  byte "manager"
  app_global_get
  ==
  global GroupSize
  int 1
  ==
  &&
  assert
  int 1
  return
  main_l25:
  global GroupSize
  int 1
  ==
  txn NumAppArgs
  int 0
  ==
  &&
  txn RekeyTo
  global ZeroAddress
  ==
  txn CloseRemainderTo
  global ZeroAddress
  ==
  &&
  txn AssetCloseTo
  global ZeroAddress
  ==
  &&
  &&
  assert
  txn Sender
  byte "whitelisted"
  int 0
  app_local_put
  txn Sender
  byte "unclaimed"
  int 0
  app_local_put
  int 1
  return
  main_l26:
  global GroupSize
  int 1
  ==
  txn RekeyTo
  global ZeroAddress
  ==
  txn CloseRemainderTo
  global ZeroAddress
  ==
  &&
  txn AssetCloseTo
  global ZeroAddress
  ==
  &&
  &&
  assert
  byte "whitelist_count"
  int 0
  app_global_put
  byte "manager"
  txn Sender
  app_global_put
  byte "minted_units"
  int 0
  app_global_put
  byte "current_tier"
  int 0
  app_global_put
  int 1
  return

  // compute_total_price
  computetotalprice_0:
  store 2
  load 2
  byte "whitelisted"
  app_local_get
  int 0
  >
  bnz computetotalprice_0_l2
  byte "price"
  app_global_get
  b computetotalprice_0_l3
  computetotalprice_0_l2:
  byte "price"
  app_global_get
  byte "price"
  app_global_get
  int 10
  /
  -
  computetotalprice_0_l3:
  retsub

  // increase_minted_units
  increasemintedunits_1:
  byte "minted_units"
  byte "minted_units"
  app_global_get
  int 1
  +
  app_global_put
  retsub

  // execute_mint_tx
  executeminttx_2:
  store 4
  store 3
  itxn_begin
  int acfg
  itxn_field TypeEnum
  int 1
  itxn_field ConfigAssetTotal
  int 0
  itxn_field ConfigAssetDecimals
  byte "DYN"
  itxn_field ConfigAssetUnitName
  byte "Dyno"
  itxn_field ConfigAssetName
  int 0
  itxn_field ConfigAssetDefaultFrozen
  global CurrentApplicationAddress
  itxn_field ConfigAssetClawback
  byte "manager"
  app_global_get
  itxn_field ConfigAssetManager
  load 3
  itxn_field ConfigAssetURL
  load 4
  itxn_field Note
  global MinTxnFee
  itxn_field Fee
  itxn_submit
  itxn CreatedAssetID
  store 1
  retsub

  // transfer_asset
  transferasset_3:
  store 5
  itxn_begin
  int axfer
  itxn_field TypeEnum
  load 5
  itxn_field XferAsset
  int 1
  itxn_field AssetAmount
  global CurrentApplicationAddress
  itxn_field AssetSender
  txn Sender
  itxn_field AssetReceiver
  itxn_submit
  retsub

  // send_payment
  sendpayment_4:
  store 7
  store 6
  itxn_begin
  int pay
  itxn_field TypeEnum
  load 7
  itxn_field Amount
  global CurrentApplicationAddress
  itxn_field Sender
  load 6
  itxn_field Receiver
  global MinTxnFee
  itxn_field Fee
  itxn_submit
  retsub
scParams: {}
